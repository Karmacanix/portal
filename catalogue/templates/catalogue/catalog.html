{% extends "home/base.html" %}
{% load static %}
{# Load the tag library #}
{% load bootstrap5 %}
{% load mptt_tags %}
{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript %}
{% block content %}

</body>
  <div class="container my-3">
    <h2>Catalogue</h2>
    {% if messages %}
      {% bootstrap_messages %}
    {% endif %}
    {% if user.is_authenticated %}
      {% if catalog %}
      <ul>
          {% recursetree catalog %}
              <li>
                  <a href="{% url 'update_catalog' node.id %}"><i class="fa-solid fa-plus"></i> {{ node.name }}</a>
                  {% if not node.is_leaf_node %}
                      <ul class="children">
                        {{ children }}
                      </ul>
                  {% endif %}
              </li>
          {% endrecursetree %}
      </ul>
      {% else %}
        <p class="text-danger">No data found.</p>
      {% endif %}
      <br/>
        <p><button class="w3-btn w3-purple w3-padding w3-round-large w3-hover-green">
          <a href="{% url 'create_catalog' %}" class="nav-link px-2 text-white">
            <i class="fa-solid fa-circle-plus"></i> 
            New Tree Node
          </a>
        </button></p>
      <br/>
    {% else %}
      <p class="text-danger">You are not permitted access to this information.</p>
    {% endif %}
  </div>
</body>
{% endblock %}
